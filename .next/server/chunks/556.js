exports.id=556,exports.ids=[556],exports.modules={174:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,16133,23)),Promise.resolve().then(c.t.bind(c,16444,23)),Promise.resolve().then(c.t.bind(c,16042,23)),Promise.resolve().then(c.t.bind(c,49477,23)),Promise.resolve().then(c.t.bind(c,29345,23)),Promise.resolve().then(c.t.bind(c,12089,23)),Promise.resolve().then(c.t.bind(c,46577,23)),Promise.resolve().then(c.t.bind(c,31307,23)),Promise.resolve().then(c.t.bind(c,14817,23))},1036:(a,b,c)=>{"use strict";let d;c.r(b),c.d(b,{"0033b0c20bbdf4f621e168125c011a3c0c16a42dbb":()=>C,"401bf61e5d4eec2199a54fd1783f066a83197a48e0":()=>p,"40aadaaccd0cf3249ef5f2805ef6eee103a9e86387":()=>q,"60262ec95dcb34127ff99b47faa38f4b1f9b9ae5eb":()=>E,"60341cf61b9d09afb24bc512d186aa980e4163ca31":()=>B,"60a1b43acf10bb3c9102c13d27166ecace9c257f19":()=>D,"60f2f4814a5b98293ce405210414261b38e08ce9ba":()=>A});var e=c(91199);c(42087);var f=c(63271),g=c(72401);let h=[{id:"study_001",title:"Synergistic Effects of Creatine and Beta-Alanine on High-Intensity Exercise Performance",abstract:"This randomized controlled trial examined the combined effects of creatine monohydrate (5g) and beta-alanine (3.2g) supplementation on anaerobic performance in trained athletes over 8 weeks.",supplements:["creatine","beta-alanine"],studyType:"RCT",participantCount:45,duration:8,outcomes:["increased power output","reduced fatigue","improved anaerobic capacity"],effectSize:1.2,qualityScore:8.5,citation:"Smith et al. (2023). Journal of Sports Science, 41(12), 1123-1135.",pValue:.001,confidenceInterval:"95%"},{id:"study_002",title:"Whey Protein and Leucine Supplementation for Muscle Protein Synthesis",abstract:"Double-blind placebo-controlled study investigating the effects of whey protein (25g) with added leucine (2.5g) on muscle protein synthesis rates in resistance-trained individuals.",supplements:["whey protein","leucine"],studyType:"RCT",participantCount:32,duration:12,outcomes:["increased MPS","improved recovery","enhanced muscle growth"],effectSize:.9,qualityScore:9.2,citation:"Johnson et al. (2023). American Journal of Clinical Nutrition, 118(3), 567-578.",pValue:.003,confidenceInterval:"95%"},{id:"study_003",title:"Magnesium Glycinate and Zinc Bisglycinate for Sleep Quality and Recovery",abstract:"Randomized trial examining the effects of magnesium glycinate (400mg) and zinc bisglycinate (15mg) on sleep quality and recovery markers in athletes.",supplements:["magnesium","zinc"],studyType:"RCT",participantCount:60,duration:6,outcomes:["improved sleep quality","faster recovery","reduced inflammation"],effectSize:1.1,qualityScore:8.8,citation:"Davis et al. (2023). Sleep Medicine Research, 14(2), 89-98.",pValue:.002,confidenceInterval:"95%"}],i=[{stackId:"power-performance",userId:"user_001",supplements:["creatine","beta-alanine","citrulline"],adherence:.95,duration:8,outcomes:{strengthGain:.18,enduranceImprovement:.22,satisfactionScore:4.7,sideEffects:"none",wouldRecommend:!0},demographics:{age:28,gender:"male",fitnessLevel:"intermediate",goals:["strength","power"]}},{stackId:"recovery-sleep",userId:"user_002",supplements:["magnesium","zinc","melatonin"],adherence:.88,duration:6,outcomes:{sleepQualityImprovement:.35,recoveryTime:-.25,satisfactionScore:4.5,sideEffects:"mild drowsiness initially",wouldRecommend:!0},demographics:{age:35,gender:"female",fitnessLevel:"advanced",goals:["recovery","sleep"]}},{stackId:"muscle-building",userId:"user_003",supplements:["whey protein","leucine","vitamin d"],adherence:.92,duration:12,outcomes:{muscleGain:.15,strengthGain:.12,satisfactionScore:4.8,sideEffects:"none",wouldRecommend:!0},demographics:{age:24,gender:"male",fitnessLevel:"beginner",goals:["muscle building","strength"]}}],j=[{name:"Creatine Monohydrate",brand:"Optimum Nutrition",price:29.99,affiliateUrl:"https://example.com/creatine-affiliate",commissionRate:.08,rating:4.6,reviewCount:15420,category:"performance",dosage:"5g",servingsPerContainer:60,keyBenefits:["increased power","muscle volumization","improved recovery"]},{name:"Beta-Alanine Powder",brand:"NOW Sports",price:24.99,affiliateUrl:"https://example.com/beta-alanine-affiliate",commissionRate:.06,rating:4.4,reviewCount:8750,category:"performance",dosage:"3.2g",servingsPerContainer:75,keyBenefits:["reduced fatigue","improved endurance","enhanced workout capacity"]},{name:"Whey Protein Isolate",brand:"Dymatize",price:54.99,affiliateUrl:"https://example.com/whey-affiliate",commissionRate:.12,rating:4.7,reviewCount:22340,category:"protein",dosage:"25g",servingsPerContainer:32,keyBenefits:["muscle protein synthesis","fast absorption","lean muscle growth"]},{name:"Magnesium Glycinate",brand:"Thorne",price:19.99,affiliateUrl:"https://example.com/magnesium-affiliate",commissionRate:.1,rating:4.8,reviewCount:5670,category:"recovery",dosage:"400mg",servingsPerContainer:30,keyBenefits:["improved sleep","muscle relaxation","reduced stress"]},{name:"Zinc Bisglycinate",brand:"Life Extension",price:12.99,affiliateUrl:"https://example.com/zinc-affiliate",commissionRate:.09,rating:4.5,reviewCount:3420,category:"recovery",dosage:"15mg",servingsPerContainer:90,keyBenefits:["immune support","wound healing","hormone optimization"]}],k=process.env.OPENAI_API_KEY?new f.Ay({apiKey:process.env.OPENAI_API_KEY}):null,l=process.env.ANTHROPIC_API_KEY?new g.Ay({apiKey:process.env.ANTHROPIC_API_KEY}):null;class m{async generateEvidenceBasedStack(a){try{if(!k)return console.log("OpenAI not available, using fallback stack"),this.getFallbackStack(a);{let b=this.findRelevantStudies(a),c=this.findSimilarUsers(a),d=this.findRelevantProducts(a),e=await k.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:`You are an expert supplement scientist creating synergistic stacks.
                       
                       FOCUS ON:
                       1. Supplements that work together (synergy)
                       2. Scientific evidence backing
                       3. User safety and realistic expectations
                       4. Cost-effectiveness within budget
                       
                       Create a JSON response with the exact SupplementStack structure.`},{role:"user",content:`
                Create a supplement stack for this user:
                
                User Profile:
                - Age: ${a.age}
                - Gender: ${a.gender}
                - Goals: ${a.fitnessGoals.join(", ")}
                - Budget: $${a.budget}
                - Health concerns: ${a.healthConcerns.join(", ")}
                - Experience: ${a.experienceLevel}
                - Lifestyle: ${a.lifestyle}
                
                Available Products: ${JSON.stringify(d.slice(0,3))}
                
                Relevant Studies: ${JSON.stringify(b.slice(0,2))}
                
                Similar User Outcomes: ${JSON.stringify(c.slice(0,2))}
                
                Requirements:
                1. Max 3-5 supplements that work synergistically
                2. Stay within budget
                3. Includes specific dosages and timing
                4. Provides scientific rationale
                5. Estimates timeline for results
                
                Return as JSON with this exact structure:
                {
                  "id": "stack_[random_id]",
                  "name": "Descriptive Stack Name",
                  "supplements": [
                    {
                      "name": "supplement name",
                      "dosage": "specific dosage",
                      "timing": "when to take",
                      "reasoning": "why this supplement and dosage",
                      "price": 0,
                      "affiliateUrl": null
                    }
                  ],
                  "totalMonthlyCost": 0,
                  "estimatedCommission": 0,
                  "evidenceScore": 0,
                  "userSuccessRate": 0,
                  "timeline": "expected_results_timeline",
                  "synergies": ["synergy1", "synergy2"],
                  "contraindications": ["warning1", "warning2"],
                  "scientificBacking": {
                    "studyCount": 0,
                    "qualityScore": 0,
                    "citations": ["citation1", "citation2"]
                  }
                }`}],max_tokens:1500,temperature:.7}),f=e.choices[0]?.message?.content;if(!f)throw Error("No content received from OpenAI");let g=JSON.parse(f);return await this.enhanceWithContent(g,a)}}catch(b){return console.error("Error generating stack:",b),this.getFallbackStack(a)}}async generateChatResponse(a,b){try{if(k){let c=await k.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:`You are NutriWise AI, a helpful supplement advisor. ${b?`Context: ${b}`:""}`},{role:"user",content:a}],max_tokens:500,temperature:.7});return c.choices[0]?.message?.content||"I apologize, but I couldn't generate a response. Please try again."}{let a=["Thank you for your question! I'm here to help you with supplement advice.","That's a great question about nutrition and supplements. Let me help you with that.","I understand you're looking for guidance on supplements. Here's what I can suggest...","Based on your inquiry, I'd be happy to provide some supplement recommendations."];return a[Math.floor(Math.random()*a.length)]}}catch(a){return console.error("Error generating chat response:",a),"I apologize, but I'm having trouble processing your request right now. Please try again."}}findRelevantStudies(a){let b=[...a.fitnessGoals,a.lifestyle];return h.filter(a=>b.some(b=>a.outcomes.some(a=>a.toLowerCase().includes(b.toLowerCase())))).slice(0,3)}findSimilarUsers(a){return i.filter(b=>10>Math.abs(b.demographics.age-a.age)&&b.demographics.goals.some(b=>a.fitnessGoals.includes(b))).slice(0,2)}findRelevantProducts(a){return j.filter(b=>b.price<=.4*a.budget).slice(0,5)}async enhanceWithContent(a,b){try{if(!l)return a;{let c=await l.messages.create({model:"claude-3-5-sonnet-20241022",max_tokens:500,messages:[{role:"user",content:`Write a persuasive description for this supplement stack: ${a.name}. 
                       Focus on the benefits for someone with goals: ${b.fitnessGoals.join(", ")}.
                       Keep it under 100 words and focus on results and scientific backing.`}]});return{...a,persuasiveDescription:"text"===c.content[0].type?c.content[0].text:"",enhancedAt:new Date().toISOString()}}}catch(b){return console.error("Error enhancing with content:",b),a}}getFallbackStack(a){let b=[{name:"Whey Protein Isolate",dosage:"25g",timing:"Post-workout",reasoning:"High-quality protein for muscle protein synthesis and recovery",price:54.99,affiliateUrl:"https://example.com/whey-protein"},{name:"Creatine Monohydrate",dosage:"5g",timing:"Daily, any time",reasoning:"Proven to increase power output and muscle volumization",price:29.99,affiliateUrl:"https://example.com/creatine"},{name:"Magnesium Glycinate",dosage:"400mg",timing:"Before bed",reasoning:"Supports sleep quality and muscle relaxation",price:19.99,affiliateUrl:"https://example.com/magnesium"}],c=b.reduce((a,b)=>a+b.price,0);return{id:`fallback_${Date.now()}`,name:"Essential Foundation Stack",supplements:b,totalMonthlyCost:c,estimatedCommission:.1*c,evidenceScore:8.5,userSuccessRate:.85,timeline:"4-6 weeks for noticeable results",synergies:["Protein and creatine work together for muscle growth","Magnesium improves sleep quality for better recovery"],contraindications:["Consult doctor if you have kidney issues before taking creatine","Start with lower magnesium dose if you experience digestive issues"],scientificBacking:{studyCount:150,qualityScore:9.2,citations:["Kreider et al. (2023). International Society of Sports Nutrition position stand: safety and efficacy of creatine supplementation.","Devries & Phillips (2015). Supplemental protein in support of muscle mass and health."]}}}}new m;var n=c(33331);let o=new m;async function p(a){try{return{stack:await o.generateEvidenceBasedStack(a),success:!0,message:"Supplement stack generated successfully"}}catch(a){return console.error("[Action Error] Failed to get supplement suggestions:",a),{stack:{id:"error",name:"Error",supplements:[],totalMonthlyCost:0,estimatedCommission:0,evidenceScore:0,userSuccessRate:0,timeline:"N/A",synergies:[],contraindications:[],scientificBacking:{studyCount:0,qualityScore:0,citations:[]}},success:!1,message:a instanceof Error?a.message:"An unknown error occurred"}}}async function q(a){try{return{response:await o.generateChatResponse(a.message,a.context),success:!0}}catch(a){return console.error("Error in chatbotResponseAction:",a),{response:"I apologize, but I'm having trouble processing your request right now. Please try again.",success:!1}}}(0,n.D)([p,q]),(0,e.A)(p,"401bf61e5d4eec2199a54fd1783f066a83197a48e0",null),(0,e.A)(q,"40aadaaccd0cf3249ef5f2805ef6eee103a9e86387",null);var r=c(11988),s=c(72507),t=c(59652);d=0===(0,r.Dk)().length?(0,r.Wp)({apiKey:"AIzaSyD7Z1SD_6yhEueIUE_NRAh-9kJHjzcwYaE",authDomain:"nutriwise-ai-3fmvs.firebaseapp.com",projectId:"nutriwise-ai-3fmvs",storageBucket:"nutriwise-ai-3fmvs.firebasestorage.app",messagingSenderId:"336578713643",appId:"1:336578713643:web:704650262eaac23288726e"}):(0,r.Sx)();let u=(0,t.aU)(d),v=()=>(0,s.xI)(d);var w=c(65699);let x=w.Ik({fitnessGoals:w.Yj().describe("The user’s primary fitness goals, e.g., weight lifting, cardio, weight loss."),gender:w.Yj().describe("The user's gender."),age:w.ai().describe("The user’s age."),weight:w.ai().describe("The user’s weight in kilograms."),activityLevel:w.Yj().describe("The user's weekly activity level."),diet:w.Yj().describe("The user's dietary preference (e.g., Balanced, Vegan, Keto)."),sleepQuality:w.Yj().describe("The user's self-reported sleep quality."),healthConcerns:w.YO(w.Yj()).optional().describe("A list of specific health concerns the user has."),otherCriteria:w.Yj().optional().describe("Any other relevant criteria from the user, like allergies."),budget:w.Yj().optional().describe("The user specified budget for supplements."),race:w.Yj().describe("The user’s race or ethnicity.")}),y=w.Ik({supplementName:w.Yj().describe("The name of the supplement."),brand:w.Yj().describe("The brand of the supplement."),price:w.Yj().describe("The price of the supplement."),whereToOrder:w.Yj().describe("Where to order the supplement from."),userReviewsSummary:w.Yj().describe("A summary of user reviews for the supplement."),scientificDataSummary:w.Yj().describe("A summary of scientific data supporting the supplement."),imageUrl:w.Yj().optional().describe("A dynamically generated image URL for the supplement."),asin:w.Yj().optional().describe("A fake but realistic-looking Amazon Standard Identification Number (ASIN).")}),z=w.Ik({suggestions:w.YO(y).describe("A list of supplement suggestions."),dailySchedule:w.Yj().describe("A daily schedule of when to take the supplements."),additionalNotes:w.Yj().optional().describe("Any additional notes or considerations for the user.")});async function A(a,b){let c=b.get("email"),d=b.get("password"),e=b.get("firstName"),f=b.get("lastName");if(!c||!d||!e||!f)return{error:"Please fill out all fields."};if(d.length<6)return{error:"Password should be at least 6 characters."};try{let a=v(),b=await (0,s.eJ)(a,c,d),g=`${e} ${f}`;return await (0,s.r7)(b.user,{displayName:g}),await (0,s.gA)(b.user),{success:!0}}catch(a){if("auth/email-already-in-use"===a.code)return{error:"This email is already registered. Please login instead."};return{error:`An unexpected error occurred during signup: ${a.message}`}}}async function B(a,b){let c=b.get("email"),d=b.get("password");if(!c||!d)return{error:"Please provide both email and password."};try{let a=v();return await (0,s.x9)(a,c,d),{success:!0}}catch(a){if("auth/invalid-credential"===a.code||"auth/wrong-password"===a.code||"auth/user-not-found"===a.code)return{error:"Invalid email or password."};return{error:`An unexpected error occurred during login: ${a.message}`}}}async function C(){try{let a=v();await (0,s.CI)(a)}catch(a){console.error("Error during logout:",a)}}async function D(a,b){let c=b.get("email");if(!c)return{error:"Please enter your email address."};try{let a=v();return await (0,s.J1)(a,c),{success:!0,message:"Password reset email sent. Please check your inbox."}}catch(a){return{error:"Failed to send reset email. Please check the address and try again."}}}async function E(a,b){try{let c=JSON.parse(b),d=w.Ik({input:x,output:z}).safeParse(c);if(!d.success)return void console.error("Invalid plan data provided, cannot save:",d.error.format());let e=(0,t.rJ)(u,`users/${a}/plans`);await (0,t.gS)(e,{...d.data,createdAt:(0,t.O5)()})}catch(b){console.error(`Failed to save initial plan for user ${a}:`,b)}}w.Ik({userId:w.Yj().describe("The unique identifier of the user."),message:w.Yj().describe("The user message to the chatbot."),chatHistory:w.YO(w.Ik({role:w.k5(["user","assistant"]),content:w.Yj()})).optional().describe("The chat history between the user and the chatbot."),recommendationContext:w.Ik({input:x,output:z}).optional().describe("The context of a previously generated supplement recommendation.")}),w.Ik({response:w.Yj().describe("The chatbot response to the user message."),recommendation:z.optional().describe("A new supplement recommendation, if one was generated."),recommendationInput:x.optional().describe("The input that generated the new recommendation.")}),w.Ik({supplementName:w.Yj().describe("The name of the supplement.")}),w.Ik({imageUrl:w.Yj().describe("The data URI of the generated supplement image. Format: 'data:image/png;base64,<encoded_data>'")}),w.Ik({supplements:w.YO(w.Ik({name:w.Yj().describe("The name of the supplement."),dosage:w.Yj().describe("The dosage of the supplement (e.g., 500mg)."),timing:w.Yj().describe("The ideal timing for taking the supplement (e.g., with breakfast, before workout)."),duration:w.Yj().describe("The duration for taking the supplement (e.g., 4 weeks, 3 months)."),notes:w.Yj().optional().describe("Any additional notes or instructions for the supplement.")})).describe("An array of supplement objects, each containing name, dosage, timing, duration, and optional notes."),userLifestyle:w.Yj().describe("Description of the user lifestyle")}),w.Ik({schedule:w.Yj().describe("A personalized daily schedule detailing when and how to take each supplement, considering optimal timing and duration.")}),(0,n.D)([A,B,C,D,E]),(0,e.A)(A,"60f2f4814a5b98293ce405210414261b38e08ce9ba",null),(0,e.A)(B,"60341cf61b9d09afb24bc512d186aa980e4163ca31",null),(0,e.A)(C,"0033b0c20bbdf4f621e168125c011a3c0c16a42dbb",null),(0,e.A)(D,"60a1b43acf10bb3c9102c13d27166ecace9c257f19",null),(0,e.A)(E,"60262ec95dcb34127ff99b47faa38f4b1f9b9ae5eb",null)},4780:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(49384),e=c(82348);function f(...a){return(0,e.QP)((0,d.$)(a))}},6640:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>m,metadata:()=>l});var d=c(37413);c(61135);var e=c(79737),f=c(59337);function g(){return(0,d.jsx)("footer",{className:"py-6 md:px-8 md:py-0 border-t",children:(0,d.jsx)("div",{className:"container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row",children:(0,d.jsxs)("p",{className:"text-center text-sm leading-loose text-muted-foreground md:text-left",children:["\xa9 ",new Date().getFullYear()," NutriStack. All Rights Reserved."]})})})}var h=c(69210),i=c(12543),j=c(39812),k=c(71858);let l={title:"NutriWise AI",description:"AI-powered supplement advisor for your fitness goals."};function m({children:a}){return(0,d.jsxs)("html",{lang:"en",children:[(0,d.jsxs)("head",{children:[(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,d.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=PT+Sans:wght@400;700&display=swap",rel:"stylesheet"})]}),(0,d.jsx)("body",{className:"font-body antialiased min-h-screen bg-background flex flex-col",children:(0,d.jsx)(i.AppProvider,{children:(0,d.jsx)(k.AuthProvider,{children:(0,d.jsxs)(h.CartProvider,{children:[(0,d.jsx)(f.SiteHeader,{}),(0,d.jsx)("main",{className:"flex-grow",children:a}),(0,d.jsx)(g,{}),(0,d.jsx)(e.Toaster,{}),(0,d.jsx)(j.default,{})]})})})})]})}},12543:(a,b,c)=>{"use strict";c.d(b,{AppProvider:()=>e});var d=c(61369);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call AppProvider() from the server but AppProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\contexts\\app-context.tsx","AppProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useAppContext() from the server but useAppContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\contexts\\app-context.tsx","useAppContext")},14947:(a,b,c)=>{"use strict";c.d(b,{Toaster:()=>r});var d=c(60687),e=c(29867),f=c(43210),g=c(47313),h=c(24224),i=c(11860),j=c(4780);let k=g.Kq,l=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.LM,{ref:c,className:(0,j.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...b}));l.displayName=g.LM.displayName;let m=(0,h.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),n=f.forwardRef(({className:a,variant:b,...c},e)=>(0,d.jsx)(g.bL,{ref:e,className:(0,j.cn)(m({variant:b}),a),...c}));n.displayName=g.bL.displayName,f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.rc,{ref:c,className:(0,j.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...b})).displayName=g.rc.displayName;let o=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.bm,{ref:c,className:(0,j.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...b,children:(0,d.jsx)(i.A,{className:"h-4 w-4"})}));o.displayName=g.bm.displayName;let p=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.hE,{ref:c,className:(0,j.cn)("text-sm font-semibold",a),...b}));p.displayName=g.hE.displayName;let q=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.VY,{ref:c,className:(0,j.cn)("text-sm opacity-90",a),...b}));function r(){let{toasts:a}=(0,e.dj)();return(0,d.jsxs)(k,{children:[a.map(function({id:a,title:b,description:c,action:e,...f}){return(0,d.jsxs)(n,{...f,children:[(0,d.jsxs)("div",{className:"grid gap-1",children:[b&&(0,d.jsx)(p,{children:b}),c&&(0,d.jsx)(q,{children:c})]}),e,(0,d.jsx)(o,{})]},a)}),(0,d.jsx)(l,{})]})}q.displayName=g.VY.displayName},23564:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>z,a:()=>B,A:()=>A});var d=c(60687),e=c(43210),f=c(7150),g=c(33784),h=c(58560),i=c(75535),j=c(43214);let k=j.Ik({fitnessGoals:j.Yj().describe("The user’s primary fitness goals, e.g., weight lifting, cardio, weight loss."),gender:j.Yj().describe("The user's gender."),age:j.ai().describe("The user’s age."),weight:j.ai().describe("The user’s weight in kilograms."),activityLevel:j.Yj().describe("The user's weekly activity level."),diet:j.Yj().describe("The user's dietary preference (e.g., Balanced, Vegan, Keto)."),sleepQuality:j.Yj().describe("The user's self-reported sleep quality."),healthConcerns:j.YO(j.Yj()).optional().describe("A list of specific health concerns the user has."),otherCriteria:j.Yj().optional().describe("Any other relevant criteria from the user, like allergies."),budget:j.Yj().optional().describe("The user specified budget for supplements."),race:j.Yj().describe("The user’s race or ethnicity.")}),l=j.Ik({supplementName:j.Yj().describe("The name of the supplement."),brand:j.Yj().describe("The brand of the supplement."),price:j.Yj().describe("The price of the supplement."),whereToOrder:j.Yj().describe("Where to order the supplement from."),userReviewsSummary:j.Yj().describe("A summary of user reviews for the supplement."),scientificDataSummary:j.Yj().describe("A summary of scientific data supporting the supplement."),imageUrl:j.Yj().optional().describe("A dynamically generated image URL for the supplement."),asin:j.Yj().optional().describe("A fake but realistic-looking Amazon Standard Identification Number (ASIN).")}),m=j.Ik({suggestions:j.YO(l).describe("A list of supplement suggestions."),dailySchedule:j.Yj().describe("A daily schedule of when to take the supplements."),additionalNotes:j.Yj().optional().describe("Any additional notes or considerations for the user.")});async function n(a,b){try{let c=(0,g.ru)(),d=JSON.parse(b),e=j.Ik({input:k,output:m}).safeParse(d);if(!e.success)return void console.error("Invalid plan data provided, cannot save:",e.error.format());let f=(0,i.rJ)(c,`users/${a}/plans`);await (0,i.gS)(f,{...e.data,createdAt:(0,i.O5)()})}catch(b){console.error(`Failed to save initial plan for user ${a}:`,b)}}async function o(a,b){console.log("\uD83D\uDD0D getOrCreateUserProfile called for user:",a.email);let c=(0,g.ru)(),d=(0,i.H9)(c,"users",a.uid);try{console.log("\uD83D\uDD0D Checking if user document exists...");let c=await (0,i.x7)(d);if(c.exists()){console.log("✅ User document exists, loading profile...");let a=c.data(),b=a.subscription,d=!1;b?.status==="active"&&b.endDate&&(d=(b.endDate?.toDate?b.endDate.toDate():new Date(b.endDate))>new Date);let e={email:a.email,displayName:a.displayName,photoURL:a.photoURL,createdAt:a.createdAt?.toDate().toISOString()||new Date().toISOString(),isAdmin:a.isAdmin??!1,isPremium:d,subscription:b};return{success:!0,profile:e}}{console.log("\uD83D\uDD28 User document doesn't exist, creating new profile...");let c=a.displayName||a.email?.split("@")[0]||"User",e=a.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(c)}&background=random&color=fff`,f={email:a.email,displayName:c,photoURL:e,createdAt:(0,i.O5)(),isAdmin:!1};console.log("\uD83D\uDD28 Writing new user profile to Firestore...",f),await (0,i.BN)(d,f),console.log("✅ User profile created successfully"),b&&(console.log("\uD83D\uDD28 Saving initial plan for user..."),await n(a.uid,b));let g={...f,createdAt:new Date().toISOString(),isPremium:!1};return console.log("✅ New user profile created and returned:",g),{success:!0,profile:g}}}catch(a){return console.error("❌ Error in getOrCreateUserProfile:",a),{success:!1,error:a.message}}}j.Ik({userId:j.Yj().describe("The unique identifier of the user."),message:j.Yj().describe("The user message to the chatbot."),chatHistory:j.YO(j.Ik({role:j.k5(["user","assistant"]),content:j.Yj()})).optional().describe("The chat history between the user and the chatbot."),recommendationContext:j.Ik({input:k,output:m}).optional().describe("The context of a previously generated supplement recommendation.")}),j.Ik({response:j.Yj().describe("The chatbot response to the user message."),recommendation:m.optional().describe("A new supplement recommendation, if one was generated."),recommendationInput:k.optional().describe("The input that generated the new recommendation.")}),j.Ik({supplementName:j.Yj().describe("The name of the supplement.")}),j.Ik({imageUrl:j.Yj().describe("The data URI of the generated supplement image. Format: 'data:image/png;base64,<encoded_data>'")}),j.Ik({supplements:j.YO(j.Ik({name:j.Yj().describe("The name of the supplement."),dosage:j.Yj().describe("The dosage of the supplement (e.g., 500mg)."),timing:j.Yj().describe("The ideal timing for taking the supplement (e.g., with breakfast, before workout)."),duration:j.Yj().describe("The duration for taking the supplement (e.g., 4 weeks, 3 months)."),notes:j.Yj().optional().describe("Any additional notes or instructions for the supplement.")})).describe("An array of supplement objects, each containing name, dosage, timing, duration, and optional notes."),userLifestyle:j.Yj().describe("Description of the user lifestyle")}),j.Ik({schedule:j.Yj().describe("A personalized daily schedule detailing when and how to take each supplement, considering optimal timing and duration.")});var p=c(29867),q=c(29523),r=c(41862),s=c(16189);let t=(0,e.createContext)(void 0),u=new f.HF;u.setCustomParameters({prompt:"select_account"});let v=["/login","/signup","/forgot-password"],w=["/","/advisor","/subscribe","/subscribe/checkout","/cart"],x="/verify-email",y=a=>v.some(b=>a.startsWith(b)),z=({children:a})=>{let[b,c]=(0,e.useState)(null),[i,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!0),[m,n]=(0,e.useState)(!1),{toast:q}=(0,p.dj)(),r=(0,s.useRouter)(),v=(0,s.usePathname)(),z=(0,s.useSearchParams)(),A=(0,e.useCallback)(async a=>{if(console.log("\uD83D\uDD04 Auth state changed:",a?`User: ${a.email}, Verified: ${a.emailVerified}`:"No user"),l(!0),a){console.log("\uD83D\uDD04 Attempting to get/create user profile for:",a.email);let{success:b,profile:d,error:e}=await o(a);console.log("\uD83D\uDD04 Profile result:",{success:b,profile:d,error:e}),b&&d?(c(a),j(d),console.log("✅ User profile loaded successfully")):(console.error("❌ Profile fetch/create failed:",e),q({variant:"destructive",title:"Authentication Error",description:"There was a problem loading your user profile. Please try logging in again."}),await (0,h.r)(),c(null),j(null))}else c(null),j(null);l(!1)},[q]);(0,e.useEffect)(()=>{console.log("\uD83D\uDE80 Setting up Firebase Auth listener...");let a=(0,g.Cy)();console.log("\uD83D\uDE80 Firebase Auth instance:",a);let b=(0,f.hg)(a,a=>{console.log("\uD83D\uDD25 onAuthStateChanged triggered with user:",a?a.email:"null"),A(a)});return()=>{console.log("\uD83D\uDE80 Cleaning up Firebase Auth listener"),b()}},[A]),(0,e.useEffect)(()=>{if(k)return;let a=b?.emailVerified??!1;if(b)if(a||v===x){if(a&&(y(v)||v===x)){let a=z.get("redirect")||"/tracker";r.push(a)}}else r.push(x);else y(v)||(a=>w.some(b=>a.startsWith(b))||"/"===a)(v)||v===x||r.push(`/login?redirect=${v}`)},[b,k,v,r,z]);let B=(0,e.useCallback)(async()=>{console.log("\uD83D\uDD0D Refreshing auth status...");let a=(0,g.Cy)().currentUser;a?(console.log("\uD83D\uDD0D Current user found, reloading..."),await a.reload(),await A(a)):(console.log("\uD83D\uDD0D No current user found during refresh"),await A(null))},[A]),C=async a=>{if(m)return;n(!0);let b=(0,g.Cy)();try{await (0,f.df)(b,u)}catch(a){"auth/popup-closed-by-user"!==a.code&&"auth/cancelled-popup-request"!==a.code&&q({variant:"destructive",title:"Google Sign-in Failed",description:`An unexpected error occurred: ${a.message}`})}finally{n(!1)}};return(0,d.jsx)(t.Provider,{value:{user:b,profile:i,loading:k,isAuthInProgress:m,refreshAuthStatus:B,googleSignIn:C},children:a})},A=()=>{let a=(0,e.useContext)(t);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a};function B({initialPlanJson:a}){let{googleSignIn:b,isAuthInProgress:c}=A();return(0,d.jsxs)(q.$,{variant:"outline",className:"w-full",type:"button",disabled:c,onClick:()=>{b(a).catch(a=>{})},"data-testid":"google-button",children:[c?(0,d.jsx)(r.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,d.jsx)("svg",{className:"mr-2 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:(0,d.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 126 21.2 172.9 65.6l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})}),c?"Please wait...":"Continue with Google"]})}},29523:(a,b,c)=>{"use strict";c.d(b,{$:()=>j});var d=c(60687),e=c(43210),f=c(8730),g=c(24224),h=c(4780);let i=(0,g.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",premium:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 text-white hover:shadow-lg transition-shadow"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},29867:(a,b,c)=>{"use strict";c.d(b,{dj:()=>l});var d=c(43210);let e=0,f=new Map,g=a=>{if(f.has(a))return;let b=setTimeout(()=>{f.delete(a),j({type:"REMOVE_TOAST",toastId:a})},1e6);f.set(a,b)},h=[],i={toasts:[]};function j(a){i=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?g(c):a.toasts.forEach(a=>{g(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(i,a),h.forEach(a=>{a(i)})}function k({...a}){let b=(e=(e+1)%Number.MAX_SAFE_INTEGER).toString(),c=()=>j({type:"DISMISS_TOAST",toastId:b});return j({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||c()}}}),{id:b,dismiss:c,update:a=>j({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function l(){let[a,b]=d.useState(i);return d.useEffect(()=>(h.push(b),()=>{let a=h.indexOf(b);a>-1&&h.splice(a,1)}),[a]),{...a,toast:k,dismiss:a=>j({type:"DISMISS_TOAST",toastId:a})}}},33784:(a,b,c)=>{"use strict";let d;c.d(b,{Cy:()=>i,ru:()=>j});var e=c(67989),f=c(7150),g=c(75535);d=0===(0,e.Dk)().length?(0,e.Wp)({apiKey:"AIzaSyD7Z1SD_6yhEueIUE_NRAh-9kJHjzcwYaE",authDomain:"nutriwise-ai-3fmvs.firebaseapp.com",projectId:"nutriwise-ai-3fmvs",storageBucket:"nutriwise-ai-3fmvs.firebasestorage.app",messagingSenderId:"336578713643",appId:"1:336578713643:web:704650262eaac23288726e"}):(0,e.Sx)();let h=(0,g.aU)(d),i=()=>(0,f.xI)(d),j=()=>h},39812:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\repo\\\\NutriWiseAI\\\\src\\\\components\\\\client-only-chat-widget.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\components\\client-only-chat-widget.tsx","default")},39926:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25227,23)),Promise.resolve().then(c.t.bind(c,86346,23)),Promise.resolve().then(c.t.bind(c,27924,23)),Promise.resolve().then(c.t.bind(c,40099,23)),Promise.resolve().then(c.t.bind(c,38243,23)),Promise.resolve().then(c.t.bind(c,28827,23)),Promise.resolve().then(c.t.bind(c,62763,23)),Promise.resolve().then(c.t.bind(c,97173,23)),Promise.resolve().then(c.bind(c,25587))},48438:(a,b,c)=>{"use strict";c.d(b,{default:()=>i});var d=c(60687),e=c(30036),f=c(29523),g=c(33872);let h=(0,e.default)(async()=>{},{loadableGenerated:{modules:["components\\client-only-chat-widget.tsx -> @/components/chat-widget"]},ssr:!1,loading:()=>(0,d.jsx)(f.$,{className:"fixed bottom-4 right-4 h-16 w-16 rounded-full shadow-lg",size:"icon",disabled:!0,children:(0,d.jsx)(g.A,{className:"h-8 w-8"})})});function i(){return(0,d.jsx)(h,{})}},53922:(a,b,c)=>{"use strict";c.d(b,{B:()=>i});var d=c(43210),e=c(7150),f=c(33784),g=c(29867),h=c(16189);function i(){let[a,b]=(0,d.useState)(!1),{toast:c}=(0,g.dj)(),i=(0,h.useRouter)();return{signup:async(a,d,g,h)=>{if(!a||!d||!g||!h)return void c({variant:"destructive",title:"Error",description:"Please fill out all fields."});if(d.length<6)return void c({variant:"destructive",title:"Error",description:"Password should be at least 6 characters."});b(!0);try{let b=(0,f.Cy)(),j=await (0,e.eJ)(b,a,d),k=`${g} ${h}`;await (0,e.r7)(j.user,{displayName:k}),await (0,e.gA)(j.user),c({title:"Account Created!",description:"Please check your email to verify your account."}),i.push("/verify-email")}catch(b){let a="An unexpected error occurred during signup.";"auth/email-already-in-use"===b.code?a="This email is already registered. Please login instead.":"auth/weak-password"===b.code?a="Password is too weak. Please choose a stronger password.":"auth/invalid-email"===b.code&&(a="Please enter a valid email address."),c({variant:"destructive",title:"Signup Failed",description:a})}finally{b(!1)}},login:async(a,d)=>{if(!a||!d)return void c({variant:"destructive",title:"Error",description:"Please provide both email and password."});b(!0);try{let b=(0,f.Cy)();await (0,e.x9)(b,a,d),c({title:"Login Successful!",description:"Welcome back!"})}catch(b){let a="An unexpected error occurred during login.";"auth/invalid-credential"===b.code||"auth/wrong-password"===b.code||"auth/user-not-found"===b.code?a="Invalid email or password.":"auth/too-many-requests"===b.code&&(a="Too many failed attempts. Please try again later."),c({variant:"destructive",title:"Login Failed",description:a})}finally{b(!1)}},resetPassword:async a=>{if(!a)return void c({variant:"destructive",title:"Error",description:"Please enter your email address."});b(!0);try{let b=(0,f.Cy)();await (0,e.J1)(b,a),c({title:"Reset Email Sent",description:"Please check your inbox for password reset instructions."})}catch(a){c({variant:"destructive",title:"Reset Failed",description:"Failed to send reset email. Please check the address and try again."})}finally{b(!1)}},logout:async()=>{b(!0);try{let a=(0,f.Cy)();await (0,e.CI)(a),c({title:"Signed Out",description:"You have been successfully signed out."}),i.push("/")}catch(a){c({variant:"destructive",title:"Logout Failed",description:"Failed to sign out. Please try again."})}finally{b(!1)}},isLoading:a}}},58560:(a,b,c)=>{"use strict";c.d(b,{r:()=>e});var d=c(6475);let e=(0,d.createServerReference)("0033b0c20bbdf4f621e168125c011a3c0c16a42dbb",d.callServer,void 0,d.findSourceMapURL,"logout")},59337:(a,b,c)=>{"use strict";c.d(b,{SiteHeader:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call SiteHeader() from the server but SiteHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\components\\site-header.tsx","SiteHeader")},60191:(a,b,c)=>{Promise.resolve().then(c.bind(c,39812)),Promise.resolve().then(c.bind(c,59337)),Promise.resolve().then(c.bind(c,79737)),Promise.resolve().then(c.bind(c,12543)),Promise.resolve().then(c.bind(c,71858)),Promise.resolve().then(c.bind(c,69210))},61135:()=>{},68401:(a,b,c)=>{"use strict";c.d(b,{SiteHeader:()=>H});var d=c(60687),e=c(85814),f=c.n(e),g=c(92363),h=c(40083),i=c(99891),j=c(28561),k=c(12941),l=c(29523),m=c(43210),n=c(26134),o=c(24224),p=c(11860),q=c(4780);let r=n.bL,s=n.l9;n.bm;let t=n.ZL,u=m.forwardRef(({className:a,...b},c)=>(0,d.jsx)(n.hJ,{className:(0,q.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));u.displayName=n.hJ.displayName;let v=(0,o.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),w=m.forwardRef(({side:a="right",className:b,children:c,...e},f)=>(0,d.jsxs)(t,{children:[(0,d.jsx)(u,{}),(0,d.jsxs)(n.UC,{ref:f,className:(0,q.cn)(v({side:a}),b),...e,children:[c,(0,d.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,d.jsx)(p.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));w.displayName=n.UC.displayName;let x=({className:a,...b})=>(0,d.jsx)("div",{className:(0,q.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});x.displayName="SheetHeader";let y=m.forwardRef(({className:a,...b},c)=>(0,d.jsx)(n.hE,{ref:c,className:(0,q.cn)("text-lg font-semibold text-foreground",a),...b}));y.displayName=n.hE.displayName;let z=m.forwardRef(({className:a,...b},c)=>(0,d.jsx)(n.VY,{ref:c,className:(0,q.cn)("text-sm text-muted-foreground",a),...b}));z.displayName=n.VY.displayName;var A=c(76344),B=c(23564),C=c(53922),D=c(85726);let E=()=>(0,d.jsx)("div",{className:"flex items-center",title:"NutriWise AI",children:(0,d.jsxs)("svg",{viewBox:"0 0 200 28",height:"28",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[(0,d.jsx)("defs",{children:(0,d.jsx)("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');"})}),(0,d.jsx)("text",{x:"0",y:"22",fontFamily:"Poppins, sans-serif",fontSize:"24",fontWeight:"700",letterSpacing:"-1",className:"fill-foreground",children:"NUTRI"}),(0,d.jsx)("text",{x:"78",y:"22",fontFamily:"Poppins, sans-serif",fontSize:"24",fontWeight:"700",letterSpacing:"-1",className:"fill-primary",children:"WISE"})]})}),F=()=>{let{user:a,profile:b,loading:c}=(0,B.A)(),{logout:e,isLoading:i}=(0,C.B)();return c?(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(D.E,{className:"h-10 w-20"}),(0,d.jsx)(D.E,{className:"h-10 w-32"})]}):(0,d.jsx)("div",{className:"flex items-center gap-2",children:a&&a.emailVerified?(0,d.jsxs)(d.Fragment,{children:[!b?.isPremium&&(0,d.jsx)(l.$,{asChild:!0,variant:"premium",children:(0,d.jsxs)(f(),{href:"/subscribe",children:[(0,d.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Upgrade"]})}),(0,d.jsxs)(l.$,{variant:"outline",onClick:e,disabled:i,children:[(0,d.jsx)(h.A,{className:"mr-2 h-4 w-4"}),i?"Signing out...":"Logout"]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.$,{variant:"ghost",asChild:!0,children:(0,d.jsx)(f(),{href:"/login",children:"Login"})}),(0,d.jsx)(l.$,{asChild:!0,children:(0,d.jsx)(f(),{href:"/signup",children:"Create Free Account"})})]})})},G=({closeSheet:a})=>{let{user:b,profile:c,loading:e}=(0,B.A)(),{logout:i,isLoading:j}=(0,C.B)();return(0,d.jsx)("div",{className:"flex flex-col space-y-4",children:b&&b.emailVerified?(0,d.jsxs)(d.Fragment,{children:[!c?.isPremium&&(0,d.jsx)(l.$,{asChild:!0,variant:"premium",onClick:a,children:(0,d.jsxs)(f(),{href:"/subscribe",children:[(0,d.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Upgrade"]})}),(0,d.jsxs)(l.$,{variant:"ghost",className:"w-full justify-start",onClick:async()=>{await i(),a()},disabled:j,children:[(0,d.jsx)(h.A,{className:"mr-2 h-4 w-4"}),j?"Signing out...":"Logout"]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.$,{variant:"ghost",onClick:a,asChild:!0,children:(0,d.jsx)(f(),{href:"/login",children:"Login"})}),(0,d.jsx)(l.$,{onClick:a,asChild:!0,children:(0,d.jsx)(f(),{href:"/signup",children:"Create Free Account"})})]})})};function H(){let{state:a}=(0,A._)(),{user:b,profile:c,loading:e}=(0,B.A)(),g=function(){let[a,b]=(0,m.useState)(!1);return a}(),[h,n]=(0,m.useState)(!1),o=a.items.reduce((a,b)=>a+b.quantity,0),p=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.$,{variant:"ghost",asChild:!0,onClick:()=>n(!1),children:(0,d.jsx)(f(),{href:"/advisor",children:"AI Advisor"})}),(0,d.jsx)(l.$,{variant:"ghost",asChild:!0,onClick:()=>n(!1),children:(0,d.jsx)(f(),{href:"/tracker",children:"Fitness Tracker"})}),(0,d.jsx)(l.$,{variant:"ghost",asChild:!0,onClick:()=>n(!1),children:(0,d.jsx)(f(),{href:"/community",children:"Community"})}),(0,d.jsx)(l.$,{variant:"ghost",asChild:!0,onClick:()=>n(!1),children:(0,d.jsx)(f(),{href:"/my-plans",children:"My Plans"})}),c?.isAdmin&&(0,d.jsx)(l.$,{variant:"ghost",asChild:!0,onClick:()=>n(!1),children:(0,d.jsxs)(f(),{href:"/admin/users",className:"flex items-center gap-2",children:[(0,d.jsx)(i.A,{className:"w-4 h-4"}),"Admin"]})})]});return(0,d.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,d.jsxs)("div",{className:"container flex h-14 items-center",children:[(0,d.jsx)("div",{className:"mr-4 flex items-center",children:(0,d.jsx)(f(),{href:"/",className:"flex items-center space-x-2",children:(0,d.jsx)(E,{})})}),g?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"flex flex-1 items-center justify-end space-x-2",children:[(0,d.jsx)(l.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,d.jsxs)(f(),{href:"/cart",children:[(0,d.jsx)(j.A,{}),o>0&&(0,d.jsx)("span",{className:"absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-xs text-primary-foreground",children:o}),(0,d.jsx)("span",{className:"sr-only",children:"Cart"})]})}),(0,d.jsxs)(r,{open:h,onOpenChange:n,children:[(0,d.jsx)(s,{asChild:!0,children:(0,d.jsx)(l.$,{variant:"ghost",size:"icon","aria-label":"Toggle Menu",children:(0,d.jsx)(k.A,{})})}),(0,d.jsxs)(w,{side:"right",children:[(0,d.jsxs)(x,{className:"sr-only",children:[(0,d.jsx)(y,{children:"Navigation Menu"}),(0,d.jsx)(z,{children:"Main links for navigating the site, including AI advisor, fitness tracker, and your account."})]}),(0,d.jsxs)("div",{className:"mt-8 flex flex-col space-y-4",children:[p,(0,d.jsx)("hr",{}),e?(0,d.jsx)(D.E,{className:"h-10 w-full","data-testid":"skeleton"}):(0,d.jsx)(G,{closeSheet:()=>n(!1)})]})]})]})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("nav",{className:"hidden md:flex items-center space-x-1 text-sm font-medium",children:p}),(0,d.jsxs)("div",{className:"flex flex-1 items-center justify-end space-x-4",children:[(0,d.jsx)(l.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,d.jsxs)(f(),{href:"/cart",className:"relative",children:[(0,d.jsx)(j.A,{}),o>0&&(0,d.jsx)("span",{className:"absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-xs text-primary-foreground",children:o}),(0,d.jsx)("span",{className:"sr-only",children:"Cart"})]})}),e?(0,d.jsxs)("div",{className:"flex items-center gap-2","data-testid":"skeleton",children:[(0,d.jsx)(D.E,{className:"h-10 w-24"}),(0,d.jsx)(D.E,{className:"h-10 w-36"})]}):(0,d.jsx)(F,{})]})]})]})})}},69210:(a,b,c)=>{"use strict";c.d(b,{CartProvider:()=>e});var d=c(61369);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call CartProvider() from the server but CartProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\contexts\\cart-context.tsx","CartProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useCart() from the server but useCart is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\contexts\\cart-context.tsx","useCart")},70440:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(31658);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},71858:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>e});var d=c(61369);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\contexts\\auth-context.tsx","AuthProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\contexts\\auth-context.tsx","useAuth"),(0,d.registerClientReference)(function(){throw Error("Attempted to call GoogleButton() from the server but GoogleButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\contexts\\auth-context.tsx","GoogleButton")},76344:(a,b,c)=>{"use strict";c.d(b,{CartProvider:()=>i,_:()=>j});var d=c(60687),e=c(43210);let f={items:[]},g=(0,e.createContext)(void 0),h=(a,b)=>{switch(b.type){case"ADD_ITEM":if(a.items.find(a=>a.supplementName===b.payload.supplementName))return{...a,items:a.items.map(a=>a.supplementName===b.payload.supplementName?{...a,quantity:a.quantity+1}:a)};return{...a,items:[...a.items,{...b.payload,quantity:1}]};case"REMOVE_ITEM":return{...a,items:a.items.filter(a=>a.supplementName!==b.payload.supplementName)};case"UPDATE_QUANTITY":return{...a,items:a.items.map(a=>a.supplementName===b.payload.supplementName?{...a,quantity:b.payload.quantity}:a).filter(a=>a.quantity>0)};case"CLEAR_CART":return{...a,items:[]};default:return a}},i=({children:a})=>{let[b,c]=(0,e.useReducer)(h,f);return(0,d.jsx)(g.Provider,{value:{state:b,dispatch:c},children:a})},j=()=>{let a=(0,e.useContext)(g);if(void 0===a)throw Error("useCart must be used within a CartProvider");return a}},79737:(a,b,c)=>{"use strict";c.d(b,{Toaster:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\repo\\NutriWiseAI\\src\\components\\ui\\toaster.tsx","Toaster")},85726:(a,b,c)=>{"use strict";c.d(b,{E:()=>f});var d=c(60687),e=c(4780);function f({className:a,...b}){return(0,d.jsx)("div",{className:(0,e.cn)("animate-pulse rounded-md bg-muted",a),...b})}},87905:(a,b,c)=>{"use strict";c.d(b,{AppProvider:()=>i});var d=c(60687),e=c(43210),f=c(16189);let g="recommendationContext",h=(0,e.createContext)(void 0),i=({children:a})=>{let[b,c]=(0,e.useState)(!1),[i,j]=(0,e.useState)(""),[k,l]=(0,e.useState)(null),m=(0,f.useRouter)();(0,e.useEffect)(()=>{try{let a=sessionStorage.getItem(g);a&&l(JSON.parse(a))}catch(a){console.error("Failed to load recommendation context from session storage",a),sessionStorage.removeItem(g)}},[]);let n=a=>{j(a),c(!0)},o=(0,e.useCallback)(a=>{l(a)},[]),p=(a,b)=>{o({input:b,output:a}),m.push("/advisor")},q=(0,e.useMemo)(()=>({isChatOpen:b,setChatOpen:c,initialPrompt:i,setInitialPrompt:j,loadPromptAndOpenChat:n,recommendationContext:k,setRecommendationContext:o,setAdvisorResults:p}),[b,i,k,o]);return(0,d.jsx)(h.Provider,{value:q,children:a})}},97143:(a,b,c)=>{Promise.resolve().then(c.bind(c,48438)),Promise.resolve().then(c.bind(c,68401)),Promise.resolve().then(c.bind(c,14947)),Promise.resolve().then(c.bind(c,87905)),Promise.resolve().then(c.bind(c,23564)),Promise.resolve().then(c.bind(c,76344))}};