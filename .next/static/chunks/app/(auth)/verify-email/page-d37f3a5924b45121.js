(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{84:(e,a,t)=>{Promise.resolve().then(t.bind(t,9916))},646:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>m,ZB:()=>n,Zp:()=>l,aR:()=>c,wL:()=>o});var s=t(5155),r=t(2115),i=t(9434);let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});l.displayName="Card";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});c.displayName="CardHeader";let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});n.displayName="CardTitle";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let m=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",t),...r})});m.displayName="CardContent";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})});o.displayName="CardFooter"},8856:(e,a,t)=>{"use strict";t.d(a,{E:()=>i});var s=t(5155),r=t(9434);function i(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",a),...t})}},9916:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var s=t(5155),r=t(2115),i=t(1320),l=t(285),c=t(6695),n=t(9946);let d=(0,n.A)("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);var m=t(646),o=t(1154);let u=(0,n.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var x=t(4903),f=t(7481),h=t(3957),N=t(8856),j=t(5695);function p(){let{user:e,loading:a}=(0,i.A)(),{toast:t}=(0,f.dj)(),n=(0,j.useRouter)(),[p,v]=(0,r.useState)(!1),[y,w]=(0,r.useState)(0),g=async()=>{if(!(y>0)&&e)try{await (0,x.gA)(e),t({title:"Verification Email Sent",description:"A new verification link has been sent to your email address."}),w(60)}catch(e){t({variant:"destructive",title:"Error Sending Email",description:e.message})}},k=async()=>{if(e){v(!0);try{await e.reload(),e.emailVerified?t({title:"Email Verified! \uD83C\uDF89",description:"Your account has been verified successfully."}):t({title:"Not Verified Yet",description:"Please click the verification link in your email first."})}catch(e){console.error("Error checking verification:",e),t({variant:"destructive",title:"Error",description:"Failed to check verification status. Please try again."})}finally{v(!1)}}};return((0,r.useEffect)(()=>{if(y>0){let e=setTimeout(()=>w(y-1),1e3);return()=>clearTimeout(e)}},[y]),(0,r.useEffect)(()=>{if(e&&e.emailVerified)return},[e]),a)?(0,s.jsxs)(c.Zp,{className:"mx-auto max-w-md",children:[(0,s.jsxs)(c.aR,{className:"text-center",children:[(0,s.jsx)(N.E,{className:"h-12 w-12 rounded-full mx-auto"}),(0,s.jsx)(N.E,{className:"h-6 w-48 mx-auto mt-4"}),(0,s.jsx)(N.E,{className:"h-4 w-64 mx-auto mt-2"})]}),(0,s.jsxs)(c.Wu,{className:"text-center",children:[(0,s.jsx)(N.E,{className:"h-10 w-full mb-2"}),(0,s.jsx)(N.E,{className:"h-10 w-full mb-4"}),(0,s.jsx)(N.E,{className:"h-5 w-24 mx-auto"})]})]}):e?e.emailVerified?(0,s.jsxs)(c.Zp,{className:"mx-auto max-w-md",children:[(0,s.jsxs)(c.aR,{className:"text-center",children:[(0,s.jsx)(m.A,{className:"mx-auto h-12 w-12 text-green-500"}),(0,s.jsx)(c.ZB,{className:"text-2xl font-headline mt-4",children:"Email Verified!"}),(0,s.jsx)(c.BT,{children:"Your account has been successfully verified."})]}),(0,s.jsx)(c.Wu,{className:"text-center",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"You will be redirected to your dashboard shortly..."})})]}):(0,s.jsxs)(c.Zp,{className:"mx-auto max-w-md",children:[(0,s.jsxs)(c.aR,{className:"text-center",children:[(0,s.jsx)(d,{className:"mx-auto h-12 w-12 text-primary"}),(0,s.jsx)(c.ZB,{className:"text-2xl font-headline mt-4",children:"Verify Your Email"}),(0,s.jsxs)(c.BT,{children:["We've sent a verification link to ",(0,s.jsx)("span",{className:"font-bold text-foreground",children:e.email}),". Please check your inbox and click the link to activate your account."]})]}),(0,s.jsxs)(c.Wu,{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"If you don't see the email, please check your spam folder. It can sometimes take a minute or two to arrive."}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)(l.$,{onClick:k,disabled:p,className:"w-full",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{className:"mr-2 h-4 w-4"}),"I've verified, check again"]})}),(0,s.jsx)(l.$,{variant:"outline",onClick:g,disabled:y>0||!e,className:"w-full",children:y>0?"Resend available in ".concat(y,"s"):"Resend Verification Email"}),(0,s.jsx)("form",{action:h.r,children:(0,s.jsx)(l.$,{variant:"ghost",type:"submit",className:"w-full text-muted-foreground",children:"Sign Out"})})]})]})]}):(0,s.jsxs)(c.Zp,{className:"mx-auto max-w-md",children:[(0,s.jsxs)(c.aR,{className:"text-center",children:[(0,s.jsx)(d,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,s.jsx)(c.ZB,{className:"text-2xl font-headline mt-4",children:"Please Sign In"}),(0,s.jsx)(c.BT,{children:"You need to be signed in to verify your email."})]}),(0,s.jsx)(c.Wu,{className:"text-center",children:(0,s.jsx)(l.$,{onClick:()=>n.push("/login"),className:"w-full",children:"Go to Login"})})]})}}},e=>{e.O(0,[135,210,455,508,743,320,441,964,358],()=>e(e.s=84)),_N_E=e.O()}]);