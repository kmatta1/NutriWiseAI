(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1121:(e,t,s)=>{"use strict";s.d(t,{SiteHeader:()=>N});var a=s(5155),r=s(6874),i=s.n(r),n=s(7951),l=s(4835),o=s(5525),d=s(7809),c=s(4783),u=s(285),m=s(8382),h=s(2432),f=s(2115),p=s(1320),x=s(9414),g=s(8856);let v=()=>(0,a.jsx)("div",{className:"flex items-center",title:"NutriWise AI",children:(0,a.jsxs)("svg",{viewBox:"0 0 200 28",height:"28",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[(0,a.jsx)("defs",{children:(0,a.jsx)("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');"})}),(0,a.jsx)("text",{x:"0",y:"22",fontFamily:"Poppins, sans-serif",fontSize:"24",fontWeight:"700",letterSpacing:"-1",className:"fill-foreground",children:"NUTRI"}),(0,a.jsx)("text",{x:"78",y:"22",fontFamily:"Poppins, sans-serif",fontSize:"24",fontWeight:"700",letterSpacing:"-1",className:"fill-primary",children:"WISE"})]})}),j=()=>{let{user:e,profile:t,loading:s}=(0,p.A)(),{logout:r,isLoading:o}=(0,x.B)();return s?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.E,{className:"h-10 w-20"}),(0,a.jsx)(g.E,{className:"h-10 w-32"})]}):(0,a.jsx)("div",{className:"flex items-center gap-2",children:e&&e.emailVerified?(0,a.jsxs)(a.Fragment,{children:[!(null==t?void 0:t.isPremium)&&(0,a.jsx)(u.$,{asChild:!0,variant:"premium",children:(0,a.jsxs)(i(),{href:"/subscribe",children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Upgrade"]})}),(0,a.jsxs)(u.$,{variant:"outline",onClick:r,disabled:o,children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),o?"Signing out...":"Logout"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.$,{variant:"ghost",asChild:!0,children:(0,a.jsx)(i(),{href:"/login",children:"Login"})}),(0,a.jsx)(u.$,{asChild:!0,children:(0,a.jsx)(i(),{href:"/signup",children:"Create Free Account"})})]})})},y=e=>{let{closeSheet:t}=e,{user:s,profile:r,loading:o}=(0,p.A)(),{logout:d,isLoading:c}=(0,x.B)();return(0,a.jsx)("div",{className:"flex flex-col space-y-4",children:s&&s.emailVerified?(0,a.jsxs)(a.Fragment,{children:[!(null==r?void 0:r.isPremium)&&(0,a.jsx)(u.$,{asChild:!0,variant:"premium",onClick:t,children:(0,a.jsxs)(i(),{href:"/subscribe",children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Upgrade"]})}),(0,a.jsxs)(u.$,{variant:"ghost",className:"w-full justify-start",onClick:async()=>{await d(),t()},disabled:c,children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),c?"Signing out...":"Logout"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.$,{variant:"ghost",onClick:t,asChild:!0,children:(0,a.jsx)(i(),{href:"/login",children:"Login"})}),(0,a.jsx)(u.$,{onClick:t,asChild:!0,children:(0,a.jsx)(i(),{href:"/signup",children:"Create Free Account"})})]})})};function N(){let{state:e}=(0,h._)(),{user:t,profile:s,loading:r}=(0,p.A)(),n=function(){let[e,t]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}(),[l,x]=(0,f.useState)(!1),N=e.items.reduce((e,t)=>e+t.quantity,0),b=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.$,{variant:"ghost",asChild:!0,onClick:()=>x(!1),children:(0,a.jsx)(i(),{href:"/advisor",children:"AI Advisor"})}),(0,a.jsx)(u.$,{variant:"ghost",asChild:!0,onClick:()=>x(!1),children:(0,a.jsx)(i(),{href:"/tracker",children:"Fitness Tracker"})}),(0,a.jsx)(u.$,{variant:"ghost",asChild:!0,onClick:()=>x(!1),children:(0,a.jsx)(i(),{href:"/community",children:"Community"})}),(0,a.jsx)(u.$,{variant:"ghost",asChild:!0,onClick:()=>x(!1),children:(0,a.jsx)(i(),{href:"/my-plans",children:"My Plans"})}),(null==s?void 0:s.isAdmin)&&(0,a.jsx)(u.$,{variant:"ghost",asChild:!0,onClick:()=>x(!1),children:(0,a.jsxs)(i(),{href:"/admin/users",className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),"Admin"]})})]});return(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container flex h-14 items-center",children:[(0,a.jsx)("div",{className:"mr-4 flex items-center",children:(0,a.jsx)(i(),{href:"/",className:"flex items-center space-x-2",children:(0,a.jsx)(v,{})})}),n?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-end space-x-2",children:[(0,a.jsx)(u.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,a.jsxs)(i(),{href:"/cart",children:[(0,a.jsx)(d.A,{}),N>0&&(0,a.jsx)("span",{className:"absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-xs text-primary-foreground",children:N}),(0,a.jsx)("span",{className:"sr-only",children:"Cart"})]})}),(0,a.jsxs)(m.cj,{open:l,onOpenChange:x,children:[(0,a.jsx)(m.CG,{asChild:!0,children:(0,a.jsx)(u.$,{variant:"ghost",size:"icon","aria-label":"Toggle Menu",children:(0,a.jsx)(c.A,{})})}),(0,a.jsxs)(m.h,{side:"right",children:[(0,a.jsxs)(m.Fm,{className:"sr-only",children:[(0,a.jsx)(m.qp,{children:"Navigation Menu"}),(0,a.jsx)(m.Qs,{children:"Main links for navigating the site, including AI advisor, fitness tracker, and your account."})]}),(0,a.jsxs)("div",{className:"mt-8 flex flex-col space-y-4",children:[b,(0,a.jsx)("hr",{}),r?(0,a.jsx)(g.E,{className:"h-10 w-full","data-testid":"skeleton"}):(0,a.jsx)(y,{closeSheet:()=>x(!1)})]})]})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("nav",{className:"hidden md:flex items-center space-x-1 text-sm font-medium",children:b}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-end space-x-4",children:[(0,a.jsx)(u.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,a.jsxs)(i(),{href:"/cart",className:"relative",children:[(0,a.jsx)(d.A,{}),N>0&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-xs text-primary-foreground",children:N}),(0,a.jsx)("span",{className:"sr-only",children:"Cart"})]})}),r?(0,a.jsxs)("div",{className:"flex items-center gap-2","data-testid":"skeleton",children:[(0,a.jsx)(g.E,{className:"h-10 w-24"}),(0,a.jsx)(g.E,{className:"h-10 w-36"})]}):(0,a.jsx)(j,{})]})]})]})})}},1424:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(5155),r=s(5028),i=s(285),n=s(1366);let l=(0,r.default)(()=>Promise.all([s.e(938),s.e(568)]).then(s.bind(s,6568)),{loadableGenerated:{webpack:()=>[6568]},ssr:!1,loading:()=>(0,a.jsx)(i.$,{className:"fixed bottom-4 right-4 h-16 w-16 rounded-full shadow-lg",size:"icon",disabled:!0,children:(0,a.jsx)(n.A,{className:"h-8 w-8"})})});function o(){return(0,a.jsx)(l,{})}},2432:(e,t,s)=>{"use strict";s.d(t,{CartProvider:()=>o,_:()=>d});var a=s(5155),r=s(2115);let i={items:[]},n=(0,r.createContext)(void 0),l=(e,t)=>{switch(t.type){case"ADD_ITEM":if(e.items.find(e=>e.supplementName===t.payload.supplementName))return{...e,items:e.items.map(e=>e.supplementName===t.payload.supplementName?{...e,quantity:e.quantity+1}:e)};return{...e,items:[...e.items,{...t.payload,quantity:1}]};case"REMOVE_ITEM":return{...e,items:e.items.filter(e=>e.supplementName!==t.payload.supplementName)};case"UPDATE_QUANTITY":return{...e,items:e.items.map(e=>e.supplementName===t.payload.supplementName?{...e,quantity:t.payload.quantity}:e).filter(e=>e.quantity>0)};case"CLEAR_CART":return{...e,items:[]};default:return e}},o=e=>{let{children:t}=e,[s,o]=(0,r.useReducer)(l,i);return(0,a.jsx)(n.Provider,{value:{state:s,dispatch:o},children:t})},d=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},2558:(e,t,s)=>{"use strict";s.d(t,{Toaster:()=>g});var a=s(5155),r=s(7481),i=s(2115),n=s(6621),l=s(2085),o=s(4416),d=s(9434);let c=n.Kq,u=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r})});u.displayName=n.LM.displayName;let m=(0,l.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),h=i.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,a.jsx)(n.bL,{ref:t,className:(0,d.cn)(m({variant:r}),s),...i})});h.displayName=n.bL.displayName,i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...r})}).displayName=n.rc.displayName;let f=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...r,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})});f.displayName=n.bm.displayName;let p=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",s),...r})});p.displayName=n.hE.displayName;let x=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",s),...r})});function g(){let{toasts:e}=(0,r.dj)();return(0,a.jsxs)(c,{children:[e.map(function(e){let{id:t,title:s,description:r,action:i,...n}=e;return(0,a.jsxs)(h,{...n,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&(0,a.jsx)(p,{children:s}),r&&(0,a.jsx)(x,{children:r})]}),i,(0,a.jsx)(f,{})]},t)}),(0,a.jsx)(u,{})]})}x.displayName=n.VY.displayName},2849:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,347,23)),Promise.resolve().then(s.bind(s,1424)),Promise.resolve().then(s.bind(s,1121)),Promise.resolve().then(s.bind(s,2558)),Promise.resolve().then(s.bind(s,4031)),Promise.resolve().then(s.bind(s,1320)),Promise.resolve().then(s.bind(s,2432))},4031:(e,t,s)=>{"use strict";s.d(t,{AppProvider:()=>o,U:()=>d});var a=s(5155),r=s(2115),i=s(5695);let n="recommendationContext",l=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(null),h=(0,i.useRouter)();(0,r.useEffect)(()=>{try{let e=sessionStorage.getItem(n);e&&m(JSON.parse(e))}catch(e){console.error("Failed to load recommendation context from session storage",e),sessionStorage.removeItem(n)}},[]);let f=e=>{c(e),o(!0)},p=(0,r.useCallback)(e=>{m(e);try{e?sessionStorage.setItem(n,JSON.stringify(e)):sessionStorage.removeItem(n)}catch(e){console.error("Failed to update recommendation context in session storage",e)}},[]),x=(e,t)=>{p({input:t,output:e}),h.push("/advisor")},g=(0,r.useMemo)(()=>({isChatOpen:s,setChatOpen:o,initialPrompt:d,setInitialPrompt:c,loadPromptAndOpenChat:f,recommendationContext:u,setRecommendationContext:p,setAdvisorResults:x}),[s,d,u,p]);return(0,a.jsx)(l.Provider,{value:g,children:t})},d=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAppContext must be used within an AppProvider");return e}},8382:(e,t,s)=>{"use strict";s.d(t,{CG:()=>c,Fm:()=>p,Qs:()=>g,cj:()=>d,h:()=>f,qp:()=>x});var a=s(5155),r=s(2115),i=s(5452),n=s(2085),l=s(4416),o=s(9434);let d=i.bL,c=i.l9;i.bm;let u=i.ZL,m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});m.displayName=i.hJ.displayName;let h=(0,n.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=r.forwardRef((e,t)=>{let{side:s="right",className:r,children:n,...d}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(i.UC,{ref:t,className:(0,o.cn)(h({side:s}),r),...d,children:[n,(0,a.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=i.UC.displayName;let p=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};p.displayName="SheetHeader";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",s),...r})});x.displayName=i.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})});g.displayName=i.VY.displayName},8856:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var a=s(5155),r=s(9434);function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...s})}},9414:(e,t,s)=>{"use strict";s.d(t,{B:()=>o});var a=s(2115),r=s(4903),i=s(6104),n=s(7481),l=s(5695);function o(){let[e,t]=(0,a.useState)(!1),{toast:s}=(0,n.dj)(),o=(0,l.useRouter)();return{signup:async(e,a,n,l)=>{if(!e||!a||!n||!l)return void s({variant:"destructive",title:"Error",description:"Please fill out all fields."});if(a.length<6)return void s({variant:"destructive",title:"Error",description:"Password should be at least 6 characters."});t(!0);try{let t=(0,i.Cy)(),d=await (0,r.eJ)(t,e,a),c="".concat(n," ").concat(l);await (0,r.r7)(d.user,{displayName:c}),await (0,r.gA)(d.user),s({title:"Account Created!",description:"Please check your email to verify your account."}),o.push("/verify-email")}catch(t){let e="An unexpected error occurred during signup.";"auth/email-already-in-use"===t.code?e="This email is already registered. Please login instead.":"auth/weak-password"===t.code?e="Password is too weak. Please choose a stronger password.":"auth/invalid-email"===t.code&&(e="Please enter a valid email address."),s({variant:"destructive",title:"Signup Failed",description:e})}finally{t(!1)}},login:async(e,a)=>{if(!e||!a)return void s({variant:"destructive",title:"Error",description:"Please provide both email and password."});t(!0);try{let t=(0,i.Cy)();await (0,r.x9)(t,e,a),s({title:"Login Successful!",description:"Welcome back!"})}catch(t){let e="An unexpected error occurred during login.";"auth/invalid-credential"===t.code||"auth/wrong-password"===t.code||"auth/user-not-found"===t.code?e="Invalid email or password.":"auth/too-many-requests"===t.code&&(e="Too many failed attempts. Please try again later."),s({variant:"destructive",title:"Login Failed",description:e})}finally{t(!1)}},resetPassword:async e=>{if(!e)return void s({variant:"destructive",title:"Error",description:"Please enter your email address."});t(!0);try{let t=(0,i.Cy)();await (0,r.J1)(t,e),s({title:"Reset Email Sent",description:"Please check your inbox for password reset instructions."})}catch(e){s({variant:"destructive",title:"Reset Failed",description:"Failed to send reset email. Please check the address and try again."})}finally{t(!1)}},logout:async()=>{t(!0);try{let e=(0,i.Cy)();await (0,r.CI)(e),s({title:"Signed Out",description:"You have been successfully signed out."}),o.push("/")}catch(e){s({variant:"destructive",title:"Logout Failed",description:"Failed to sign out. Please try again."})}finally{t(!1)}},isLoading:e}}}},e=>{e.O(0,[690,135,210,455,874,508,743,828,735,791,320,441,964,358],()=>e(e.s=2849)),_N_E=e.O()}]);